<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAGE Design System</title>
    <link rel="stylesheet" href="sage-design-system.css">
    <style>
        /* Additional styles for the demo page only */
        .component-section {
            margin-bottom: 48px;
            position: relative;
        }

        .component-title {
            margin-top: 40px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--sage-border);
        }

        .color-swatch {
            display: inline-block;
            width: 100px;
            height: 100px;
            margin: 10px;
            border: 1px solid var(--sage-border);
            border-radius: var(--sage-border-radius);
            position: relative;
        }

        .color-swatch-label {
            position: absolute;
            bottom: 5px;
            left: 5px;
            font-size: 12px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 2px 5px;
            border-radius: 2px;
        }

        .theme-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background-color: var(--sage-surface);
            border: 1px solid var(--sage-border);
            padding: 15px;
            border-radius: var(--sage-border-radius);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        }

        .demo-grid-box {
            background-color: var(--sage-primary-dim);
            border: 1px solid var(--sage-primary-color);
            padding: 10px;
            text-align: center;
            border-radius: var(--sage-border-radius);
        }
    </style>
</head>

<body>
    <!-- CRT overlay effects -->
    <div class="sage-crt-effect"></div>

    <!-- Theme controls panel -->
    <div class="theme-controls">
        <div class="sage-panel-header">SYSTEM CONTROLS</div>

        <div class="sage-input-group">
            <label class="sage-label" for="primary-hue">PRIMARY HUE (0-360)</label>
            <input type="range" id="primary-hue" class="sage-input" min="0" max="360" value="120">
        </div>

        <div class="sage-input-group">
            <label class="sage-label" for="secondary-hue">SECONDARY HUE (0-360)</label>
            <input type="range" id="secondary-hue" class="sage-input" min="0" max="360" value="200">
        </div>

        <div class="sage-input-group">
            <label class="sage-label">PRESET THEMES</label>
            <button class="sage-button" data-theme="default">DEFAULT</button>
            <button class="sage-button sage-button-secondary" data-theme="blue">BLUE</button>
            <button class="sage-button sage-button-warning" data-theme="amber">AMBER</button>
            <button class="sage-button sage-button-alert" data-theme="red">RED</button>
            <button class="sage-button" style="color: white; border-color: white;" data-theme="white-phosphor">WHITE
                P</button>
        </div>
    </div>

    <!-- Main content -->
    <div class="sage-container">
        <h1>SAGE DESIGN SYSTEM</h1>
        <p class="sage-text-primary">SEMI-AUTOMATIC GROUND ENVIRONMENT TERMINAL INTERFACE</p>
        <p>This page showcases all available UI components and elements in the SAGE design system.</p>
        <p>Inspired by military air defense terminal systems from the 1950s-60s. All colors are tintable using CSS
            custom properties.</p>

        <!-- Colors Section -->
        <div class="component-section">
            <h2 class="component-title">COLORS</h2>
            <h3>Primary Colors</h3>
            <div>
                <div class="color-swatch" style="background-color: var(--sage-primary-color)">
                    <span class="color-swatch-label">Primary</span>
                </div>
                <div class="color-swatch" style="background-color: var(--sage-primary-glow)">
                    <span class="color-swatch-label">Primary Glow</span>
                </div>
                <div class="color-swatch" style="background-color: var(--sage-primary-dim)">
                    <span class="color-swatch-label">Primary Dim</span>
                </div>
            </div>

            <h3>Secondary Colors</h3>
            <div>
                <div class="color-swatch" style="background-color: var(--sage-secondary-color)">
                    <span class="color-swatch-label">Secondary</span>
                </div>
                <div class="color-swatch" style="background-color: var(--sage-secondary-glow)">
                    <span class="color-swatch-label">Secondary Glow</span>
                </div>
                <div class="color-swatch" style="background-color: var(--sage-secondary-dim)">
                    <span class="color-swatch-label">Secondary Dim</span>
                </div>
            </div>

            <h3>Alert Colors</h3>
            <div>
                <div class="color-swatch" style="background-color: var(--sage-alert-color)">
                    <span class="color-swatch-label">Alert</span>
                </div>
                <div class="color-swatch" style="background-color: var(--sage-alert-glow)">
                    <span class="color-swatch-label">Alert Glow</span>
                </div>
                <div class="color-swatch" style="background-color: var(--sage-alert-dim)">
                    <span class="color-swatch-label">Alert Dim</span>
                </div>
            </div>

            <h3>Warning Colors</h3>
            <div>
                <div class="color-swatch" style="background-color: var(--sage-warning-color)">
                    <span class="color-swatch-label">Warning</span>
                </div>
                <div class="color-swatch" style="background-color: var(--sage-warning-glow)">
                    <span class="color-swatch-label">Warning Glow</span>
                </div>
                <div class="color-swatch" style="background-color: var(--sage-warning-dim)">
                    <span class="color-swatch-label">Warning Dim</span>
                </div>
            </div>
        </div>

        <!-- Typography Section -->
        <div class="component-section">
            <h2 class="component-title">TYPOGRAPHY</h2>
            <h1>Heading Level 1</h1>
            <h2>Heading Level 2</h2>
            <h3>Heading Level 3</h3>
            <h4>Heading Level 4</h4>
            <h5>Heading Level 5</h5>
            <h6>Heading Level 6</h6>

            <p>This is a standard paragraph of text. The design system uses monospace fonts to mimic the look of early
                computer terminals. Text is styled with a slight glow effect to simulate the phosphor displays used in
                early CRT monitors.</p>

            <p><span class="sage-text-primary">Primary text</span></p>
            <p><span class="sage-text-secondary">Secondary text</span></p>
            <p><span class="sage-text-alert">Alert text</span></p>
            <p><span class="sage-text-warning">Warning text</span></p>

            <p>Inline <span class="sage-code">code blocks</span> are also supported.</p>
        </div>

        <!-- Buttons Section -->
        <div class="component-section">
            <h2 class="component-title">BUTTONS</h2>

            <div class="sage-panel">
                <h3>Standard Buttons</h3>
                <button class="sage-button">PRIMARY BUTTON</button>
                <button class="sage-button sage-button-secondary">SECONDARY BUTTON</button>
                <button class="sage-button sage-button-warning">WARNING BUTTON</button>
                <button class="sage-button sage-button-alert">ALERT BUTTON</button>
            </div>
        </div>

        <!-- Form Elements Section -->
        <div class="component-section">
            <h2 class="component-title">FORM ELEMENTS</h2>

            <div class="sage-panel">
                <h3>Input Fields</h3>

                <div class="sage-input-group">
                    <label class="sage-label" for="text-input">TEXT INPUT</label>
                    <input type="text" id="text-input" class="sage-input" placeholder="Enter text">
                </div>

                <div class="sage-input-group">
                    <label class="sage-label" for="password-input">PASSWORD</label>
                    <input type="password" id="password-input" class="sage-input" placeholder="Enter password">
                </div>

                <div class="sage-input-group">
                    <label class="sage-label" for="textarea">TEXTAREA</label>
                    <textarea id="textarea" class="sage-input" rows="4"
                        placeholder="Enter multiple lines of text"></textarea>
                </div>

                <div class="sage-input-group">
                    <label class="sage-label">TOGGLE SWITCH</label>
                    <label class="sage-toggle">
                        <input type="checkbox" checked>
                        <span class="sage-toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Panels Section -->
        <div class="component-section">
            <h2 class="component-title">PANELS AND CONTAINERS</h2>

            <div class="sage-panel">
                <div class="sage-panel-header">PANEL TITLE</div>
                <p>This is a standard panel component used to group related content.</p>
                <p>Panels can contain any other components inside them.</p>
                <div class="sage-panel-footer">PANEL FOOTER</div>
            </div>

            <div class="sage-panel sage-border-secondary sage-glow-secondary">
                <div class="sage-panel-header sage-bg-secondary">SECONDARY PANEL</div>
                <p>Panels can be styled with different colors using utility classes.</p>
                <button class="sage-button sage-button-secondary">ACTION</button>
            </div>
        </div>

        <!-- Status Indicators Section -->
        <div class="component-section">
            <h2 class="component-title">STATUS INDICATORS</h2>

            <div class="sage-panel">
                <p><span class="sage-status sage-status-active"></span> SYSTEM ACTIVE</p>
                <p><span class="sage-status sage-status-warning"></span> WARNING CONDITION</p>
                <p><span class="sage-status sage-status-alert"></span> ALERT STATUS</p>
                <p><span class="sage-status sage-status-inactive"></span> SYSTEM OFFLINE</p>
            </div>

            <div class="sage-panel">
                <h3>Badges</h3>
                <p>UNREAD MESSAGES <span class="sage-badge">5</span></p>
                <p>ONLINE STATIONS <span class="sage-badge sage-badge-secondary">12</span></p>
                <p>LOW PRIORITY <span class="sage-badge sage-badge-warning">3</span></p>
                <p>CRITICAL ERRORS <span class="sage-badge sage-badge-alert">1</span></p>
            </div>
        </div>

        <!-- Progress Bars Section -->
        <div class="component-section">
            <h2 class="component-title">PROGRESS INDICATORS</h2>

            <div class="sage-panel">
                <h3>Progress Bars</h3>
                <p>SYSTEM POWER: 75%</p>
                <div class="sage-progress-container">
                    <div class="sage-progress" style="width: 75%"></div>
                </div>

                <p>RADAR INTEGRITY: 30%</p>
                <div class="sage-progress-container">
                    <div class="sage-progress sage-bg-warning" style="width: 30%"></div>
                </div>

                <p>CRITICAL SYSTEMS: 10%</p>
                <div class="sage-progress-container">
                    <div class="sage-progress sage-bg-alert" style="width: 10%"></div>
                </div>
            </div>
        </div>

        <!-- Terminal Section -->
        <div class="component-section">
            <h2 class="component-title">CONSOLE OUTPUT</h2>

            <div class="sage-terminal">
                <p class="sage-prompt">> SYSTEM BOOT SEQUENCE INITIATED</p>
                <p>LOADING CORE MODULES...</p>
                <p>INITIALIZING RADAR SYSTEMS...</p>
                <p>CALIBRATING DETECTION ARRAYS...</p>
                <p class="sage-prompt">> SYSTEM READY</p>
                <span class="sage-cursor"></span>
            </div>
        </div>

        <!-- Alerts Section -->
        <div class="component-section">
            <h2 class="component-title">ALERTS AND NOTIFICATIONS</h2>

            <div class="sage-alert-box sage-alert-box-info">
                <strong>INFORMATION:</strong> System diagnostic completed successfully.
            </div>

            <div class="sage-alert-box sage-alert-box-success">
                <strong>SUCCESS:</strong> All stations reporting nominal function.
            </div>

            <div class="sage-alert-box sage-alert-box-warning">
                <strong>WARNING:</strong> Power fluctuations detected in sector 7.
            </div>

            <div class="sage-alert-box sage-alert-box-error">
                <strong>ALERT:</strong> Unauthorized access attempt detected.
            </div>
        </div>

        <!-- Table Section -->
        <div class="component-section">
            <h2 class="component-title">DATA TABLES</h2>

            <table class="sage-table">
                <thead>
                    <tr>
                        <th>STATION ID</th>
                        <th>LOCATION</th>
                        <th>STATUS</th>
                        <th>SIGNAL</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>STN-001</td>
                        <td>NORTH PERIMETER</td>
                        <td><span class="sage-status sage-status-active"></span> ACTIVE</td>
                        <td>98%</td>
                    </tr>
                    <tr>
                        <td>STN-002</td>
                        <td>EAST PERIMETER</td>
                        <td><span class="sage-status sage-status-warning"></span> DEGRADED</td>
                        <td>67%</td>
                    </tr>
                    <tr>
                        <td>STN-003</td>
                        <td>SOUTH PERIMETER</td>
                        <td><span class="sage-status sage-status-active"></span> ACTIVE</td>
                        <td>95%</td>
                    </tr>
                    <tr>
                        <td>STN-004</td>
                        <td>WEST PERIMETER</td>
                        <td><span class="sage-status sage-status-alert"></span> OFFLINE</td>
                        <td>0%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Grid Section -->
        <div class="component-section">
            <h2 class="component-title">GRID LAYOUT</h2>

            <div class="sage-grid">
                <div class="demo-grid-box">1</div>
                <div class="demo-grid-box">2</div>
                <div class="demo-grid-box">3</div>
                <div class="demo-grid-box">4</div>
                <div class="demo-grid-box">5</div>
                <div class="demo-grid-box">6</div>
                <div class="demo-grid-box">7</div>
                <div class="demo-grid-box">8</div>
                <div class="demo-grid-box">9</div>
                <div class="demo-grid-box">10</div>
                <div class="demo-grid-box">11</div>
                <div class="demo-grid-box">12</div>
            </div>
        </div>

        <!-- Radar display -->
        <div class="component-section">
            <h2 class="component-title">RADAR DISPLAY</h2>

            <div class="sage-panel">
                <div class="sage-radar">
                    <div class="sage-radar-grid"></div>
                    <div class="sage-radar-sweep"></div>
                    <div class="sage-target" style="top: 30%; left: 70%;"></div>
                    <div class="sage-target" style="top: 60%; left: 20%;"></div>
                    <div class="sage-target" style="top: 45%; left: 50%;"></div>
                </div>
            </div>
        </div>

        <!-- Modal example (hidden by default) -->
        <div class="sage-modal-backdrop" style="display: none;">
            <div class="sage-modal">
                <div class="sage-modal-header">SYSTEM ALERT</div>
                <div class="sage-modal-body">
                    <p>Unidentified aircraft detected in restricted airspace.</p>
                    <p>Initiate response protocol?</p>
                </div>
                <div class="sage-modal-footer">
                    <button class="sage-button sage-button-alert">INITIATE</button>
                    <button class="sage-button">CANCEL</button>
                </div>
            </div>
        </div>

        <!-- Show modal button -->
        <div class="component-section">
            <h2 class="component-title">MODAL DIALOGS</h2>
            <button id="show-modal" class="sage-button">SHOW EXAMPLE MODAL</button>
        </div>

        <!-- Tab Component Section -->
        <div class="component-section">
            <h2 class="component-title">TAB NAVIGATION</h2>

            <div class="sage-panel">
                <div class="sage-panel-header">SYSTEM NAVIGATION TABS</div>
                <p>Click on the tabs below to navigate to different system pages:</p>

                <div class="sage-tabs" id="system-tabs">
                    <ul class="sage-tab-list">
                        <li class="sage-tab active" data-tab="system-status">SYSTEM STATUS</li>
                        <li class="sage-tab" data-tab="radar-display">RADAR DISPLAY</li>
                        <li class="sage-tab" data-tab="communications">COMMUNICATIONS</li>
                    </ul>

                    <div class="sage-tab-panel active" id="system-status-panel">
                        <h3 class="sage-tab-panel-header">SYSTEM STATUS PANEL</h3>
                        <iframe src="system-status.html" title="System Status"></iframe>
                    </div>

                    <div class="sage-tab-panel" id="radar-display-panel">
                        <h3 class="sage-tab-panel-header">RADAR DISPLAY PANEL</h3>
                        <iframe src="radar-display.html" title="Radar Display"></iframe>
                    </div>

                    <div class="sage-tab-panel" id="communications-panel">
                        <h3 class="sage-tab-panel-header">COMMUNICATIONS PANEL</h3>
                        <iframe src="communications.html" title="Communications"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for theme customization and interactive demos -->
    <script>
        // Theme customization
        const primaryHueSlider = document.getElementById('primary-hue');
        const secondaryHueSlider = document.getElementById('secondary-hue');
        const themeButtons = document.querySelectorAll('[data-theme]');
        const showModalBtn = document.getElementById('show-modal');
        const modalBackdrop = document.querySelector('.sage-modal-backdrop');
        const modalCancelBtn = document.querySelector('.sage-modal-footer .sage-button:not(.sage-button-alert)');

        // Update primary hue
        primaryHueSlider.addEventListener('input', function () {
            document.documentElement.style.setProperty('--sage-primary-hue', this.value);
        });

        // Update secondary hue
        secondaryHueSlider.addEventListener('input', function () {
            document.documentElement.style.setProperty('--sage-secondary-hue', this.value);
        });

        // Function to apply theme to iframe
        function applyThemeToIframe(iframe, theme) {
            try {
                // Prepare the CSS variables to send
                const cssVars = {
                    '--sage-primary-hue': primaryHueSlider.value,
                    '--sage-secondary-hue': secondaryHueSlider.value
                };

                // For white phosphor theme, add additional variables
                if (theme === 'white-phosphor') {
                    Object.assign(cssVars, {
                        '--sage-background': '#000000',
                        '--sage-surface': '#0a0a0a',
                        '--sage-text': 'rgba(225, 255, 240, 0.85)',
                        '--sage-text-dim': 'rgba(225, 255, 240, 0.6)',
                        '--sage-border': 'rgba(225, 255, 240, 0.3)',
                        '--sage-primary-color': 'rgba(225, 255, 240, 0.9)',
                        '--sage-primary-glow': 'rgba(255, 255, 255, 1)',
                        '--sage-primary-dim': 'rgba(225, 255, 240, 0.2)',
                        '--sage-scan-line': 'rgba(255, 255, 255, 0.03)'
                    });
                }

                // Send theme update message to iframe
                iframe.contentWindow.postMessage({
                    type: 'theme-update',
                    themeClass: theme !== 'default' ? 'theme-' + theme : '',
                    cssVars
                }, '*');

            } catch (e) {
                console.error("Error applying theme to iframe:", e);
            }
        }

        // Theme presets
        themeButtons.forEach(button => {
            button.addEventListener('click', function () {
                const theme = this.dataset.theme;
                document.body.className = '';

                if (theme !== 'default') {
                    document.body.classList.add('theme-' + theme);
                }

                // Update sliders to match theme
                if (theme === 'default') {
                    primaryHueSlider.value = 120;
                    secondaryHueSlider.value = 200;
                    document.documentElement.style.setProperty('--sage-primary-hue', 120);
                    document.documentElement.style.setProperty('--sage-secondary-hue', 200);
                } else if (theme === 'blue') {
                    primaryHueSlider.value = 200;
                    secondaryHueSlider.value = 120;
                    document.documentElement.style.setProperty('--sage-primary-hue', 200);
                    document.documentElement.style.setProperty('--sage-secondary-hue', 120);
                } else if (theme === 'amber') {
                    primaryHueSlider.value = 40;
                    secondaryHueSlider.value = 200;
                    document.documentElement.style.setProperty('--sage-primary-hue', 40);
                    document.documentElement.style.setProperty('--sage-secondary-hue', 200);
                } else if (theme === 'red') {
                    primaryHueSlider.value = 0;
                    secondaryHueSlider.value = 200;
                    document.documentElement.style.setProperty('--sage-primary-hue', 0);
                    document.documentElement.style.setProperty('--sage-secondary-hue', 200);
                } else if (theme === 'white-phosphor') {
                    primaryHueSlider.value = 140;
                    secondaryHueSlider.value = 190;
                    document.documentElement.style.setProperty('--sage-primary-hue', 140);
                    document.documentElement.style.setProperty('--sage-secondary-hue', 190);
                }

                // Apply theme to all iframes
                document.querySelectorAll('iframe').forEach(iframe => {
                    applyThemeToIframe(iframe, theme);
                });
            });
        });

        // Update primary hue also to iframes
        primaryHueSlider.addEventListener('input', function () {
            const hue = this.value;
            document.documentElement.style.setProperty('--sage-primary-hue', hue);

            // Apply to all iframes
            document.querySelectorAll('iframe').forEach(iframe => {
                const currentTheme = Array.from(document.body.classList)[0]?.replace('theme-', '') || 'default';
                applyThemeToIframe(iframe, currentTheme);
            });
        });

        // Update secondary hue also to iframes
        secondaryHueSlider.addEventListener('input', function () {
            const hue = this.value;
            document.documentElement.style.setProperty('--sage-secondary-hue', hue);

            // Apply to all iframes
            document.querySelectorAll('iframe').forEach(iframe => {
                const currentTheme = Array.from(document.body.classList)[0]?.replace('theme-', '') || 'default';
                applyThemeToIframe(iframe, currentTheme);
            });
        });

        // Listen for iframe ready messages
        window.addEventListener('message', function (event) {
            if (event.data && event.data.type === 'iframe-ready') {
                const iframe = document.querySelector(`iframe[title*="${event.data.id}"]`);
                if (iframe) {
                    const currentTheme = Array.from(document.body.classList)[0]?.replace('theme-', '') || 'default';
                    applyThemeToIframe(iframe, currentTheme);
                }
            }
        });

        // Modal interaction
        showModalBtn.addEventListener('click', function () {
            modalBackdrop.style.display = 'flex';
        });

        modalCancelBtn.addEventListener('click', function () {
            modalBackdrop.style.display = 'none';
        });

        // Add some interactive targets to radar
        setInterval(() => {
            const radar = document.querySelector('.sage-radar');
            if (Math.random() > 0.8) {
                const target = document.createElement('div');
                target.className = 'sage-target';

                // Random position
                const top = Math.random() * 100;
                const left = Math.random() * 100;

                target.style.top = `${top}%`;
                target.style.left = `${left}%`;

                radar.appendChild(target);

                // Remove after some time
                setTimeout(() => {
                    target.remove();
                }, 4000 + Math.random() * 2000);
            }
        }, 2000);

        // Tab functionality
        document.querySelectorAll('.sage-tab').forEach(tab => {
            tab.addEventListener('click', function () {
                // Get the tab panel ID
                const tabId = this.getAttribute('data-tab');

                // Deactivate all tabs and panels
                document.querySelectorAll('.sage-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.sage-tab-panel').forEach(p => p.classList.remove('active'));

                // Activate the clicked tab and corresponding panel
                this.classList.add('active');
                const panel = document.getElementById(tabId + '-panel');
                panel.classList.add('active');

                // Apply current theme to the newly activated iframe
                const iframe = panel.querySelector('iframe');
                if (iframe) {
                    const currentTheme = Array.from(document.body.classList)[0]?.replace('theme-', '') || 'default';

                    // Try to apply theme immediately
                    applyThemeToIframe(iframe, currentTheme);

                    // And also apply after a short delay to ensure iframe is fully loaded
                    setTimeout(() => {
                        applyThemeToIframe(iframe, currentTheme);
                    }, 100);
                }
            });
        });

        // Initialize iframe themes on page load with retries
        document.querySelectorAll('iframe').forEach(iframe => {
            let attempts = 0;
            const maxAttempts = 5;

            function initIframeTheme() {
                try {
                    if (iframe.contentDocument && iframe.contentDocument.readyState === 'complete') {
                        const currentTheme = Array.from(document.body.classList)[0]?.replace('theme-', '') || 'default';
                        applyThemeToIframe(iframe, currentTheme);
                    } else if (attempts < maxAttempts) {
                        attempts++;
                        setTimeout(initIframeTheme, 200);
                    }
                } catch (e) {
                    console.error("Error initializing iframe theme:", e);
                    if (attempts < maxAttempts) {
                        attempts++;
                        setTimeout(initIframeTheme, 200);
                    }
                }
            }

            iframe.onload = initIframeTheme;

            // Also try to initialize immediately
            initIframeTheme();
        });
    </script>
</body>

</html>